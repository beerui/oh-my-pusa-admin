import{a7 as J,_ as Q,d as W,j as Z,r as d,m as b,v as ee,a as te,b as p,o as l,e as _,f as o,w as u,g as E,h as c,D as ue,i as s,B as a,a8 as ae,c as y,M as le,S as se}from"./index.d4f6c0d1.js";import{T as I}from"./index.0723d93c.js";const i={FAIL:0,AUDIT_PENDING:1,EXEC_PENDING:2,EXECUTING:3,FINISH:4};i.FAIL,i.AUDIT_PENDING,i.EXEC_PENDING,i.EXECUTING,i.FINISH;const C={MAIN:0,SUB:1,SUPPLEMENT:2};C.MAIN,C.SUB,C.SUPPLEMENT;const A={PAYMENT:0,RECEIPT:1},ne={BaseList:"/get-list",CardList:"/get-card-list"};function oe(){return J.get({url:ne.BaseList})}const ie=[{colKey:"row-select",type:"multiple",width:64,fixed:"left"},{title:"\u5408\u540C\u540D\u79F0",align:"left",width:300,colKey:"name",fixed:"left"},{title:"\u5408\u540C\u72B6\u6001",colKey:"status",width:200,cell:{col:"status"}},{title:"\u5408\u540C\u7F16\u53F7",width:200,ellipsis:!0,colKey:"no"},{title:"\u5408\u540C\u7C7B\u578B",width:200,ellipsis:!0,colKey:"contractType"},{title:"\u5408\u540C\u6536\u4ED8\u7C7B\u578B",width:200,ellipsis:!0,colKey:"paymentType"},{title:"\u5408\u540C\u91D1\u989D (\u5143)",width:200,ellipsis:!0,colKey:"amount"},{align:"left",fixed:"right",width:200,colKey:"op",title:"\u64CD\u4F5C"}];const ce={class:"left-operation-container"},re={key:0,class:"selected-count"},de={class:"search-input"},pe={key:0},_e={key:1},ve={key:2},Ce={key:0,class:"payment-col"},fe={key:1,class:"payment-col"},he=["onClick"],ye={name:"ListBase"},ge=W({...ye,setup(me){const k=Z(),f=d([]),g=d({defaultPageSize:20,total:100,defaultCurrent:1}),B=d(""),T=d(!1),x=async()=>{T.value=!0;try{const{list:e}=await oe();f.value=e,g.value={...g.value,total:e.length}}catch(e){console.log(e)}finally{T.value=!1}},v=d(-1),P=b(()=>{if(v.value>-1){const{name:e}=f.value[v.value];return`\u5220\u9664\u540E\uFF0C${e}\u7684\u6240\u6709\u5408\u540C\u4FE1\u606F\u5C06\u88AB\u6E05\u7A7A\uFF0C\u4E14\u65E0\u6CD5\u6062\u590D`}return""});ee(()=>{x()});const m=d(!1),r=d([1,2]),F=te(),D=()=>{v.value=-1},S=()=>{f.value.splice(v.value,1),g.value.total=f.value.length;const e=r.value.indexOf(v.value);e>-1&&r.value.splice(e,1),m.value=!1,le.success("\u5220\u9664\u6210\u529F"),D()},U=()=>{D()},w="index",L=e=>{r.value=e},M=(e,n)=>{console.log("\u5206\u9875\u53D8\u5316",e,n)},K=(e,n)=>{console.log("\u7EDF\u4E00Change",e,n)},G=()=>{F.push("/detail/base")},V=()=>{F.push("/form/base")},R=e=>{v.value=e.rowIndex,m.value=!0},X=b(()=>k.isUseTabsRouter?48:0),O=()=>document.querySelector(`.${se}-layout`);return(e,n)=>{const N=p("t-button"),Y=p("t-input"),$=p("t-row"),h=p("t-tag"),j=p("t-table"),H=p("t-card"),q=p("t-dialog");return l(),_("div",null,[o(H,{class:"list-card-container"},{default:u(()=>[o($,{justify:"space-between"},{default:u(()=>[E("div",ce,[o(N,{onClick:V},{default:u(()=>[c(" \u65B0\u5EFA\u5408\u540C ")]),_:1}),o(N,{variant:"base",theme:"default",disabled:!r.value.length},{default:u(()=>[c(" \u5BFC\u51FA\u5408\u540C ")]),_:1},8,["disabled"]),r.value.length?(l(),_("p",re,"\u5DF2\u9009"+ue(r.value.length)+"\u9879",1)):s("v-if",!0)]),E("div",de,[o(Y,{modelValue:B.value,"onUpdate:modelValue":n[0]||(n[0]=t=>B.value=t),placeholder:"\u8BF7\u8F93\u5165\u4F60\u9700\u8981\u641C\u7D22\u7684\u5185\u5BB9",clearable:""},{"suffix-icon":u(()=>[o(a(ae),{size:"20px"})]),_:1},8,["modelValue"])])]),_:1}),o(j,{data:f.value,columns:a(ie),"row-key":w,"vertical-align":"top",hover:!0,pagination:g.value,"selected-row-keys":r.value,loading:T.value,"header-affixed-top":{offsetTop:a(X),container:O},onPageChange:M,onChange:K,onSelectChange:L},{status:u(({row:t})=>[t.status===a(i).FAIL?(l(),y(h,{key:0,theme:"danger",variant:"light"},{default:u(()=>[c(" \u5BA1\u6838\u5931\u8D25 ")]),_:1})):s("v-if",!0),t.status===a(i).AUDIT_PENDING?(l(),y(h,{key:1,theme:"warning",variant:"light"},{default:u(()=>[c(" \u5F85\u5BA1\u6838 ")]),_:1})):s("v-if",!0),t.status===a(i).EXEC_PENDING?(l(),y(h,{key:2,theme:"warning",variant:"light"},{default:u(()=>[c(" \u5F85\u5C65\u884C ")]),_:1})):s("v-if",!0),t.status===a(i).EXECUTING?(l(),y(h,{key:3,theme:"success",variant:"light"},{default:u(()=>[c(" \u5C65\u884C\u4E2D ")]),_:1})):s("v-if",!0),t.status===a(i).FINISH?(l(),y(h,{key:4,theme:"success",variant:"light"},{default:u(()=>[c(" \u5DF2\u5B8C\u6210 ")]),_:1})):s("v-if",!0)]),contractType:u(({row:t})=>[t.contractType===a(C).MAIN?(l(),_("p",pe,"\u5BA1\u6838\u5931\u8D25")):s("v-if",!0),t.contractType===a(C).SUB?(l(),_("p",_e,"\u5F85\u5BA1\u6838")):s("v-if",!0),t.contractType===a(C).SUPPLEMENT?(l(),_("p",ve,"\u5F85\u5C65\u884C")):s("v-if",!0)]),paymentType:u(({row:t})=>[t.paymentType===a(A).PAYMENT?(l(),_("div",Ce,[c(" \u4ED8\u6B3E"),o(I,{class:"dashboard-item-trend",type:"up"})])):s("v-if",!0),t.paymentType===a(A).RECEIPT?(l(),_("div",fe,[c(" \u6536\u6B3E"),o(I,{class:"dashboard-item-trend",type:"down"})])):s("v-if",!0)]),op:u(t=>[E("a",{class:"t-button-link",onClick:n[1]||(n[1]=z=>G())},"\u8BE6\u60C5"),E("a",{class:"t-button-link",onClick:z=>R(t)},"\u5220\u9664",8,he)]),_:1},8,["data","columns","pagination","selected-row-keys","loading","header-affixed-top"])]),_:1}),o(q,{visible:m.value,"onUpdate:visible":n[2]||(n[2]=t=>m.value=t),header:"\u786E\u8BA4\u5220\u9664\u5F53\u524D\u6240\u9009\u5408\u540C\uFF1F",body:a(P),"on-cancel":U,onConfirm:S},null,8,["visible","body"])])}}});var Be=Q(ge,[["__scopeId","data-v-67f8484b"],["__file","/Users/motou/Desktop/project/oh-my-pusa-admin/src/pages/list/story/index.vue"]]);export{Be as default};
