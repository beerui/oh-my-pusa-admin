import{_ as H,d as J,j as Q,X as W,r as p,m as S,v as Y,b as o,o as Z,e as ee,f as e,w as a,g,h as I,B as b,D as te,a8 as ae,M as y,a9 as le,aa as ue,ab as ne,ac as oe,S as ie}from"./index.bddd5f86.js";const de=[{title:"\u540D\u79F0",align:"left",colKey:"name",fixed:"left"},{title:"appId(\u6211\u6EF4\u5929\u54EA\u5E73\u53F0)",align:"left",colKey:"appId",fixed:"left"},{title:"\u90AE\u7BB1",align:"left",colKey:"email",fixed:"left"},{title:"version",align:"left",colKey:"version",fixed:"left"},{align:"left",fixed:"right",width:200,colKey:"op",title:"\u64CD\u4F5C"}];const se={class:"left-operation-container"},re=["onClick"],pe=["onClick"],ce={name:"ListMiniApp"},me=J({...ce,setup(fe){const U=Q(),u=W({appId:"",miniAppId:"",miniAppSecret:"",name:"",descr:"",email:"",version:"",officialSite:""}),k={appId:[{required:!0}],miniAppId:[{required:!0}],miniAppSecret:[{required:!0}],name:[{required:!0}],descr:[{required:!0}],email:[{required:!0}],version:[{required:!0}],officialSite:[{required:!0}]},D=()=>{},q=({validateResult:n})=>{n===!0&&(f.value==="add"&&ae(u).then(t=>{y.success("\u65B0\u5EFA\u6210\u529F"),m.value=!1,v()}).catch(t=>{console.log(t)}),f.value==="edit"&&le(u).then(t=>{y.success("\u66F4\u65B0\u6210\u529F"),m.value=!1}).catch(t=>{console.log(t)}))},h=p([]),c=p({defaultPageSize:20,pageSize:20,current:1,total:0,defaultCurrent:1}),B=p(!1),v=async()=>{B.value=!0;try{const{list:n,total:t}=await ue({page:c.value.current,size:c.value.pageSize});h.value=n,c.value={...c.value,total:t}}catch(n){console.log(n)}finally{B.value=!1}},d=p(-1),K=S(()=>d.value>-1?"\u5220\u9664\u786E\u8BA4\uFF1F":"");Y(()=>{v()});const F=p(!1),C=()=>{d.value=-1},V=async()=>{d.value!==-1&&(await ne(d.value),v(),y.success("\u5220\u9664\u6210\u529F"),F.value=!1),C()},m=p(!1),f=p("add"),x=()=>{C()},M="id",L=n=>{c.value={...n}},N=()=>{v()},T=async()=>{f.value="add",m.value=!0},z=n=>{d.value=n.row.id,F.value=!0},R=async n=>{f.value="edit",d.value=n.row.id,u.id=Number(d.value),oe(d.value).then(t=>{for(const _ in t)u[_]=t[_];m.value=!0})},j=S(()=>U.isUseTabsRouter?48:0),P=()=>document.querySelector(`.${ie}-layout`);return(n,t)=>{const _=o("t-button"),i=o("t-form-item"),A=o("t-form"),E=o("t-row"),$=o("t-table"),O=o("t-card"),w=o("t-dialog"),r=o("t-input"),s=o("t-col"),X=o("t-textarea");return Z(),ee("div",null,[e(O,{class:"list-card-container"},{default:a(()=>[e(E,{justify:"space-between"},{default:a(()=>[g("div",se,[e(A,null,{default:a(()=>[e(i,{"label-width":"0"},{default:a(()=>[e(_,{onClick:T},{default:a(()=>[I(" \u65B0\u589E ")]),_:1})]),_:1})]),_:1})])]),_:1}),e($,{data:h.value,columns:b(de),"row-key":M,"vertical-align":"top",hover:!0,pagination:c.value,loading:B.value,"header-affixed-top":{offsetTop:b(j),container:P},onPageChange:L,onChange:N},{op:a(l=>[g("a",{class:"t-button-link",onClick:G=>R(l)},"\u4FEE\u6539",8,re),g("a",{class:"t-button-link",onClick:G=>z(l)},"\u5220\u9664",8,pe)]),_:1},8,["data","columns","pagination","loading","header-affixed-top"])]),_:1}),e(w,{visible:F.value,"onUpdate:visible":t[0]||(t[0]=l=>F.value=l),header:"\u786E\u8BA4\u5220\u9664\u5F53\u524D\u6240\u9009\uFF1F",body:b(K),"on-cancel":x,onConfirm:V},null,8,["visible","body"]),e(w,{visible:m.value,"onUpdate:visible":t[9]||(t[9]=l=>m.value=l),header:f.value==="add"?"\u65B0\u589E":"\u7F16\u8F91",footer:!1,width:"80%","on-cancel":x,onConfirm:V},{default:a(()=>[e(A,{ref:"form",data:u,rules:k,"label-align":"left","label-width":160,onReset:D,onSubmit:q},{default:a(()=>[e(E,{class:"row-gap",gutter:[16,24]},{default:a(()=>[e(s,{span:6},{default:a(()=>[e(i,{label:"\u5C0F\u7A0B\u5E8F\u540D\u79F0\uFF08\u5168\u5C40\uFF09",name:"name"},{default:a(()=>[e(r,{modelValue:u.name,"onUpdate:modelValue":t[1]||(t[1]=l=>u.name=l),style:{width:"322px"},placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:6},{default:a(()=>[e(i,{label:"\u90AE\u7BB1",name:"email"},{default:a(()=>[e(r,{modelValue:u.email,"onUpdate:modelValue":t[2]||(t[2]=l=>u.email=l),style:{width:"322px"},placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:6},{default:a(()=>[e(i,{label:"\u7248\u672C\u4FE1\u606F",name:"version"},{default:a(()=>[e(r,{modelValue:u.version,"onUpdate:modelValue":t[3]||(t[3]=l=>u.version=l),style:{width:"322px"},placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:6},{default:a(()=>[e(i,{label:"\u5B98\u65B9\u7F51\u7AD9",name:"officialSite"},{default:a(()=>[e(r,{modelValue:u.officialSite,"onUpdate:modelValue":t[4]||(t[4]=l=>u.officialSite=l),style:{width:"322px"},placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:6},{default:a(()=>[e(i,{label:"appid(\u6807\u6CE8)",name:"miniAppId"},{default:a(()=>[e(r,{modelValue:u.miniAppId,"onUpdate:modelValue":t[5]||(t[5]=l=>u.miniAppId=l),style:{width:"322px"},placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:6},{default:a(()=>[e(i,{label:"secret(\u6807\u6CE8)",name:"miniAppSecret"},{default:a(()=>[e(r,{modelValue:u.miniAppSecret,"onUpdate:modelValue":t[6]||(t[6]=l=>u.miniAppSecret=l),style:{width:"322px"},placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:6},{default:a(()=>[e(i,{label:"appid(\u672C\u5E73\u53F0)",name:"appId"},{default:a(()=>[e(r,{modelValue:u.appId,"onUpdate:modelValue":t[7]||(t[7]=l=>u.appId=l),style:{width:"322px"},placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(i,{label:"\u5173\u4E8E\u6211\u4EEC",name:"descr"},{default:a(()=>[e(X,{modelValue:u.descr,"onUpdate:modelValue":t[8]||(t[8]=l=>u.descr=l),style:{width:"322px"},placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{theme:"primary",class:"form-submit-confirm",type:"submit"},{default:a(()=>[I(te(f.value==="add"?"\u65B0\u589E":"\u66F4\u65B0"),1)]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"])])}}});var ve=H(me,[["__scopeId","data-v-224abec0"],["__file","/Users/motou/Desktop/project/oh-my-pusa-admin/src/pages/list/miniApp/index.vue"]]);export{ve as default};
