import{_ as O,d as X,j as G,r as i,m as b,v as H,X as J,b as a,o as v,e as Q,f as o,w as u,g,c as F,h as k,B as C,$ as W,a0 as Y,M as _,a1 as Z,a2 as ee,S as te}from"./index.8af38bd5.js";const ae=[{title:"\u6807\u7B7E\u540D\u79F0",align:"left",colKey:"name",fixed:"left"},{align:"left",fixed:"right",width:200,colKey:"op",title:"\u64CD\u4F5C"}];const ne={class:"left-operation-container"},oe=["onClick"],ue=["onClick"],se={name:"ListTag"},le=X({...se,setup(ce){const w=G(),h=i([]),s=i({defaultPageSize:20,pageSize:20,current:1,total:0,defaultCurrent:1}),f=i(!1),r=async()=>{f.value=!0;try{const{list:e,total:l}=await W({page:s.value.current,size:s.value.pageSize});h.value=e,s.value={...s.value,total:l}}catch(e){console.log(e)}finally{f.value=!1}},t=i(-1),x=b(()=>t.value>-1?"\u5220\u9664\u786E\u8BA4\uFF1F":"");H(()=>{r()});const d=i(!1),m=()=>{t.value=-1},B=async()=>{t.value!==-1&&(await Y(t.value),r(),_.success("\u5220\u9664\u6210\u529F"),d.value=!1),m()},p=i(!1),D=async()=>{t.value!==-1&&(await Z({id:t.value,name:n.name}),r(),_.success("\u4FEE\u6539\u6210\u529F"),p.value=!1,n.name=""),m()},E=()=>{m()},S="id",V=e=>{s.value={...e}},U=()=>{r()},n=J({name:""}),T=async()=>{if(!n.name){_.error("\u65E0\u5185\u5BB9");return}await ee(n),_.success("\u65B0\u589E\u6210\u529F"),n.name="",r()},z=e=>{t.value=e.row.id,d.value=!0},A=e=>{t.value=e.row.id,p.value=!0},L=b(()=>w.isUseTabsRouter?48:0),M=()=>document.querySelector(`.${te}-layout`);return(e,l)=>{const N=a("t-input"),y=a("t-button"),$=a("t-form-item"),j=a("t-form"),I=a("t-row"),K=a("t-table"),P=a("t-card"),R=a("t-dialog");return v(),Q("div",null,[o(P,{class:"list-card-container"},{default:u(()=>[o(I,{justify:"space-between"},{default:u(()=>[g("div",ne,[o(j,null,{default:u(()=>[o($,{"label-width":"0"},{default:u(()=>[o(N,{modelValue:n.name,"onUpdate:modelValue":l[0]||(l[0]=c=>n.name=c),placeholder:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0"},null,8,["modelValue"]),p.value?(v(),F(y,{key:0,onClick:D},{default:u(()=>[k(" \u4FEE\u6539 ")]),_:1})):(v(),F(y,{key:1,onClick:T},{default:u(()=>[k(" \u65B0\u589E ")]),_:1}))]),_:1})]),_:1})])]),_:1}),o(K,{data:h.value,columns:C(ae),"row-key":S,"vertical-align":"top",hover:!0,pagination:s.value,loading:f.value,"header-affixed-top":{offsetTop:C(L),container:M},onPageChange:V,onChange:U},{op:u(c=>[g("a",{class:"t-button-link",onClick:q=>A(c)},"\u91CD\u547D\u540D",8,oe),g("a",{class:"t-button-link",onClick:q=>z(c)},"\u5220\u9664",8,ue)]),_:1},8,["data","columns","pagination","loading","header-affixed-top"])]),_:1}),o(R,{visible:d.value,"onUpdate:visible":l[1]||(l[1]=c=>d.value=c),header:"\u786E\u8BA4\u5220\u9664\u5F53\u524D\u6240\u9009\uFF1F",body:C(x),"on-cancel":E,onConfirm:B},null,8,["visible","body"])])}}});var re=O(le,[["__scopeId","data-v-f43fb120"],["__file","/Users/motou/Desktop/project/oh-my-pusa-admin/src/pages/list/tag/index.vue"]]);export{re as default};
