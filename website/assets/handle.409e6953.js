import{_ as N,d as G,U as P,a as j,P as H,V as K,W as O,r as W,X,b as n,o as g,c as B,w as u,g as f,D as y,B as o,f as e,e as D,A as w,F as U,h as d,M as b,Y,Z}from"./index.340c67b5.js";const z={class:"form-basic-container"},J={class:"form-basic-item"},Q={class:"form-basic-container-title"},$={class:"form-submit-container"},ee={name:"ListAppHandle"},ue=G({...ee,setup(ae){const E=P(),F=j(),c=E.query.type,k={name:[{required:!0,message:"\u6B64\u9879\u5FC5\u586B",type:"error",trigger:"blur"}],descr:[{required:!0,message:"\u6B21\u9879\u5FC5\u586B",type:"error",trigger:"blur"},{validator:i=>i.length<50,message:"\u4E0D\u80FD\u8D85\u8FC7 50 \u4E2A\u5B57\uFF0C\u4E2D\u6587\u957F\u5EA6\u7B49\u4E8E\u82F1\u6587\u957F\u5EA6"}],evaluation:[{required:!0,message:"\u6B64\u9879\u5FC5\u586B",type:"error",trigger:"blur"}],icon:[{required:!0}],categories:[{required:!0,message:"\u6B64\u9879\u5FC5\u9009",type:"warning",trigger:"blur"},{required:!0,message:"\u6B64\u9879\u5FC5\u9009",type:"warning",trigger:"change"}],tags:[{required:!0,message:"\u6B64\u9879\u5FC5\u9009",type:"warning",trigger:"blur"},{required:!0,message:"\u6B64\u9879\u5FC5\u9009",type:"warning",trigger:"change"}],belong:[{required:!0,message:"\u6B64\u9879\u5FC5\u586B",type:"error",trigger:"blur"}],belongingInfo:[{required:!0,message:"\u6B64\u9879\u5FC5\u586B",type:"error",trigger:"blur"}]},V=H();K(async()=>{if(c==="edit"){const{id:i}=E.query,a=await O(i);for(const m in a)t[m]=a[m];t.id=Number(i),t.icon&&(_.value=[{status:"success",uploadTime:"\u7F16\u8F91 \u4E0D\u5C55\u793A",response:{url:t.icon},url:t.icon}])}});const _=W([]);let t=X({name:"",descr:"",evaluation:"",icon:"",score:0,weight:100,belong:1,belongingInfo:"",isEditorChoice:0,categories:[],tags:[]});const q=()=>{F.back()},x=({validateResult:i})=>{if(_.value.length===0){b.error("\u56FE\u6807\u672A\u4F20");return}t.icon=_.value[0].response.url,i===!0&&(c==="add"&&Y(t).then(a=>{b.success("\u65B0\u5EFA\u6210\u529F"),F.back()}).catch(a=>{console.log(a)}),c==="edit"&&Z(t).then(a=>{b.success("\u66F4\u65B0\u6210\u529F"),F.back()}).catch(a=>{console.log(a)}))};return(i,a)=>{const m=n("t-input"),r=n("t-form-item"),s=n("t-col"),T=n("t-input-number"),I=n("t-upload"),S=n("t-textarea"),v=n("t-option"),C=n("t-select"),p=n("t-radio"),A=n("t-radio-group"),L=n("v-md-editor"),R=n("t-row"),h=n("t-button"),M=n("t-form");return g(),B(M,{ref:"form",class:"base-form",data:o(t),rules:k,"label-align":"top","label-width":100,onReset:q,onSubmit:x},{default:u(()=>[f("div",z,[f("div",J,[f("div",Q,"\u5E94\u7528"+y(o(c)==="add"?"\u65B0\u589E":"\u7F16\u8F91"),1),e(R,{class:"row-gap",gutter:[16,24]},{default:u(()=>[e(s,{span:6},{default:u(()=>[e(r,{label:"\u5E94\u7528\u540D\u79F0",name:"name"},{default:u(()=>[e(m,{modelValue:o(t).name,"onUpdate:modelValue":a[0]||(a[0]=l=>o(t).name=l),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:6},{default:u(()=>[e(r,{label:"\u5E94\u7528\u8BC4\u5206(0-10)",name:"score"},{default:u(()=>[e(T,{modelValue:o(t).score,"onUpdate:modelValue":a[1]||(a[1]=l=>o(t).score=l),max:10,min:0,"decimal-places":2},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:u(()=>[e(r,{label:"\u5E94\u7528\u56FE\u6807",name:"icon"},{default:u(()=>[e(I,{modelValue:_.value,"onUpdate:modelValue":a[2]||(a[2]=l=>_.value=l),action:"https://file.beer-ui.com/file-api/file/upload",draggable:"",accept:"image/*",tips:"\u5EFA\u8BAE\u5C3A\u5BF8\uFF1A124x124","is-batch-upload":"",theme:"image"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:u(()=>[e(r,{label:"\u5E94\u7528\u7B80\u4ECB",name:"descr"},{default:u(()=>[e(S,{modelValue:o(t).descr,"onUpdate:modelValue":a[3]||(a[3]=l=>o(t).descr=l),maxlength:50,placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:6},{default:u(()=>[e(r,{label:"\u7C7B\u522B",name:"categories"},{default:u(()=>[e(C,{modelValue:o(t).categories,"onUpdate:modelValue":a[4]||(a[4]=l=>o(t).categories=l),placeholder:"\u8BF7\u9009\u62E9",multiple:""},{default:u(()=>[(g(!0),D(U,null,w(o(V).GET_CATE_LIST,l=>(g(),B(v,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:6},{default:u(()=>[e(r,{label:"\u6807\u7B7E",name:"tags"},{default:u(()=>[e(C,{modelValue:o(t).tags,"onUpdate:modelValue":a[5]||(a[5]=l=>o(t).tags=l),placeholder:"\u8BF7\u9009\u62E9",multiple:""},{default:u(()=>[(g(!0),D(U,null,w(o(V).GET_TAG_LIST,l=>(g(),B(v,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:u(()=>[e(r,{label:"\u5E94\u7528\u5F52\u5C5E",name:"belong"},{default:u(()=>[e(A,{modelValue:o(t).belong,"onUpdate:modelValue":a[6]||(a[6]=l=>o(t).belong=l),"default-value":"1"},{default:u(()=>[e(p,{"allow-uncheck":"",value:1},{default:u(()=>[d("\u9ED8\u8BA4\uFF08\u96C6\u6210\u5728\u5C0F\u7A0B\u5E8F\u4E2D\uFF09")]),_:1}),e(p,{"allow-uncheck":"",value:2},{default:u(()=>[d("\u81EA\u6709-\u5916\u90E8\u53D1\u5E03\u7684\u5C0F\u7A0B\u5E8F")]),_:1}),e(p,{"allow-uncheck":"",value:3},{default:u(()=>[d("\u7B2C\u4E09\u65B9-\u5C0F\u7A0B\u5E8F")]),_:1}),e(p,{value:4},{default:u(()=>[d("\u5176\u4ED6")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:u(()=>[e(r,{label:"\u8865\u5145\u5185\u5BB9\uFF08\u81EA\u6709\uFF1A\u8DEF\u5F84 \u5916\u90E8\uFF1Aappid \u7B2C\u4E09\u65B9\uFF1Aappid \u5176\u5B83\uFF1A\u81EA\u5B9A\u4E49\uFF09",name:"belongInfo"},{default:u(()=>[e(m,{modelValue:o(t).belongingInfo,"onUpdate:modelValue":a[7]||(a[7]=l=>o(t).belongingInfo=l),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:6},{default:u(()=>[e(r,{label:"\u63A8\u8350\u6392\u5E8F(0-100 \u8D8A\u5C0F\u8D8A\u524D)",name:"weight"},{default:u(()=>[e(m,{modelValue:o(t).weight,"onUpdate:modelValue":a[8]||(a[8]=l=>o(t).weight=l),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:6},{default:u(()=>[e(r,{label:"\u7F16\u8F91\u63A8\u8350",name:"isEditorChoice"},{default:u(()=>[e(A,{modelValue:o(t).isEditorChoice,"onUpdate:modelValue":a[9]||(a[9]=l=>o(t).isEditorChoice=l),"default-value":0},{default:u(()=>[e(p,{value:0},{default:u(()=>[d("\u5426")]),_:1}),e(p,{value:1},{default:u(()=>[d("\u662F")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:u(()=>[e(r,{label:"\u5E94\u7528\u8BC4\u6D4B",name:"evaluation"},{default:u(()=>[e(L,{modelValue:o(t).evaluation,"onUpdate:modelValue":a[10]||(a[10]=l=>o(t).evaluation=l),height:"400px"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})])]),f("div",$,[e(h,{theme:"primary",class:"form-submit-confirm",type:"submit"},{default:u(()=>[d(y(o(c)==="add"?"\u65B0\u589E":"\u66F4\u65B0"),1)]),_:1}),e(h,{type:"reset",class:"form-submit-cancel",theme:"default",variant:"base"},{default:u(()=>[d(" \u8FD4\u56DE ")]),_:1})])]),_:1},8,["data"])}}});var le=N(ue,[["__file","/Users/motou/Desktop/project/oh-my-pusa-admin/src/pages/list/app/handle.vue"]]);export{le as default};
