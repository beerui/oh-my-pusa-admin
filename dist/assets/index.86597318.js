import{_ as q,d as O,a as Q,P as H,j as J,r as i,m as E,v as W,b as s,o as u,e as f,f as c,w as o,g as _,h as m,B as r,F as b,A as B,c as k,D as K,Q as X,R as Y,M as Z,S as ee}from"./index.d2a9a5a4.js";const te=[{title:"\u5E94\u7528\u540D\u79F0",align:"left",width:120,ellipsis:!0,colKey:"name"},{title:"\u7B80\u4ECB",colKey:"descr",width:120,ellipsis:!0},{title:"\u56FE\u6807",width:85,colKey:"icon",cell:{col:"icon"}},{title:"\u7C7B\u522B",width:180,colKey:"categories",cell:{col:"categories"}},{title:"\u8BC4\u5206",width:85,ellipsis:!0,colKey:"score"},{title:"\u6807\u7B7E",width:180,colKey:"tags",cell:{col:"tags"}},{title:"\u6392\u5E8F",width:85,ellipsis:!0,colKey:"weight"},{title:"\u4F7F\u7528\u4EBA\u6570",width:85,ellipsis:!0,colKey:"userCount"},{title:"\u5E94\u7528\u5F52\u5C5E",width:120,ellipsis:!0,colKey:"belong"},{title:"\u5E94\u7528\u5F52\u5C5E\u4FE1\u606F",width:160,ellipsis:!0,colKey:"belongingInfo"},{title:"\u6536\u85CF",width:85,ellipsis:!0,colKey:"favoritesTimes"},{title:"\u70B9\u8D5E",width:85,ellipsis:!0,colKey:"likeTimes"},{title:"\u7F16\u8F91\u63A8\u8350",width:120,ellipsis:!0,colKey:"isEditorChoice"},{align:"left",fixed:"right",width:180,colKey:"op",title:"\u64CD\u4F5C"}];const oe={class:"left-operation-container"},ae=["src"],se=["onClick"],le=["onClick"],ne={name:"ListApp"},ie=O({...ne,setup(ue){const v=Q(),C=H(),x=J(),y=i([]),a=i({defaultPageSize:20,pageSize:20,current:1,total:0,defaultCurrent:1}),g=i(!1),h=async()=>{g.value=!0;try{const{list:e,total:p}=await X({page:a.value.current,size:a.value.pageSize});y.value=e,a.value={...a.value,total:p}}catch(e){console.log(e)}finally{g.value=!1}},l=i(-1),A=E(()=>l.value>-1?"\u5220\u9664\u786E\u8BA4\uFF1F":"");W(()=>{h()});const d=i(!1),w=()=>{l.value=-1},D=async()=>{l.value!==-1&&(await Y(l.value),await Z.success("\u5220\u9664\u6210\u529F"),await h(),d.value=!1),w()},S=()=>{w()},T="id",M=e=>{a.value={...e}},N=()=>{h()},L=()=>{v.push("/app/handle?type=add")},z=e=>{l.value=e.row.id,d.value=!0},I=e=>{v.push(`/app/handle?type=edit&id=${e.row.id}`)},P=E(()=>x.isUseTabsRouter?48:0),U=()=>document.querySelector(`.${ee}-layout`);return(e,p)=>{const V=s("t-button"),$=s("t-row"),F=s("t-tag"),j=s("t-table"),G=s("t-card"),R=s("t-dialog");return u(),f("div",null,[c(G,{class:"list-card-container"},{default:o(()=>[c($,{justify:"space-between"},{default:o(()=>[_("div",oe,[c(V,{onClick:L},{default:o(()=>[m(" \u65B0\u589E ")]),_:1})])]),_:1}),c(j,{data:y.value,columns:r(te),"row-key":T,"vertical-align":"top",hover:!0,pagination:a.value,loading:g.value,"header-affixed-top":{offsetTop:r(P),container:U},onPageChange:M,onChange:N},{categories:o(({row:t})=>[(u(!0),f(b,null,B(t.categories,n=>(u(),k(F,{class:"m-5",theme:"success",variant:"light"},{default:o(()=>[m(K(r(C).GET_CATE_NAME(n)),1)]),_:2},1024))),256))]),tags:o(({row:t})=>[(u(!0),f(b,null,B(t.tags,n=>(u(),k(F,{class:"m-5",theme:"success",variant:"light"},{default:o(()=>[m(K(r(C).GET_TAG_NAME(n)),1)]),_:2},1024))),256))]),icon:o(({row:t})=>[_("img",{class:"m-icon",src:t.icon,alt:""},null,8,ae)]),op:o(t=>[_("a",{class:"t-button-link",onClick:n=>I(t)},"\u7F16\u8F91",8,se),_("a",{class:"t-button-link",onClick:n=>z(t)},"\u5220\u9664",8,le)]),_:1},8,["data","columns","pagination","loading","header-affixed-top"])]),_:1}),c(R,{visible:d.value,"onUpdate:visible":p[0]||(p[0]=t=>d.value=t),header:"\u786E\u8BA4\u5220\u9664\u5F53\u524D\u6240\u9009\u5408\u540C\uFF1F",body:r(A),"on-cancel":S,onConfirm:D},null,8,["visible","body"])])}}});var re=q(ie,[["__scopeId","data-v-fcccb592"],["__file","/Users/motou/Desktop/project/oh-my-pusa-admin/src/pages/list/app/index.vue"]]);export{re as default};
